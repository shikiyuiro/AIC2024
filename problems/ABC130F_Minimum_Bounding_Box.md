<!--
author: ISHIKAWA Yuichiro
-->
## [ABC130F Minimum Bounding Box](https://atcoder.jp/contests/abc130/tasks/abc130_f)

<details><summary> ヒント </summary>

$x_{max}, y_{max}$の時間ごとの変化を表したグラフの傾きは、  
$(-1 → 0 → 1)$  
$x_{min}, y_{min}$の時間ごとの変化を表したグラフの傾きは、  
$(1 → 0 → -1)$  
と変化する(それぞれの傾きに対応する区間が幅$0$となる場合もあります)ことが、簡単な考察よりわかります。  
(maxやminに関して支配的な点の移り変わりに注目すると、逆方向にすすむ点と交代することはありますが、同じ方向に進む点に追い越されることはありません)
</details>
<details><summary> 解説 </summary>

$x_{max} - x_{min}$、および$y_{max} - y_{min}$をグラフに表したときの傾きは、$(-2 → -1 → 0 → 1 → 2)$と変化する(それぞれの傾きに対応する区間が幅$0$となる場合もあります)ことが上のヒントと合わせて導けます。  
このとき、100マス計算の要領から、これらの積$(x_{max} - x_{min})(y_{max} - y_{min})$の傾きの変化は、以下のグリッドを上方向および右方向にのみ進んで左下のマスから右上のマスへ移動した時の通ったマスに書かれている数に対応しています。

|     |     |     |     |     | 
| :-: | :-: | :-: | :-: | :-: | 
| -4  | -2  | 0   | 2   | 4   | 
| -2  | -1  | 0   | 1   | 2   | 
| 0   | 0   | 0   | 0   | 0   | 
| 2   | 1   | 0   | -1  | -2  | 
| 4   | 2   | 0   | -2  | -4  | 

このことから、積$(x_{max} - x_{min})(y_{max} - y_{min})$が凸関数であることが示されます。  
(証明)  
左上から右下への対角線より下側では、上方向および右方向にのみ進むことでマスに必ず書かれている数は必ず減少します。  
左上から右下への対角線より上側では、上方向および右方向にのみ進むことでマスに必ず書かれている数は必ず増加します。  
したがって、左下のマスから右上のマスへ移動するとき、対角線はちょうど$1$回だけ通ることから、これらは凸関数をなします。  
(証了)  
以上より、求める値はこの凸関数の最小値ですから、三分探索([こちらも参考にしてください](https://atcoder.jp/contests/abc279/editorial/5288?lang=ja))によって、簡単に求めることができます。

補足: なお、積$(x_{max} - x_{min})(y_{max} - y_{min})$のグラフの構造をよりきちんと調べれば計算量を$\mathrm{O}(1)$に落とすことも可能([参考](https://img.atcoder.jp/abc130/editorial.pdf))ですが、グラフが退化する場合を考慮する必要があり、実装が煩雑になるため、おすすめしません。
</details>
